---
layout: post
title:  "Docker on Mac"
date:   2017-02-20 11:17:00
categories: Other
excerpt: Docker on Mac
---

* content
{:toc}

## virtualbox
01. www.docker.com/docker-toolbox 安装
02. github.com/docker/toolbox/blob/master/osx/uninstall.sh 手动卸载virtualbox 卸载
03. GUI界面下载镜像或docker pull xxx/xxx
04. docker-machine create --driver virtualbox xxx
05. rm -rf ~/.docker/machine/machines/xxxx
06. docker-machine ls
07. docker-machine ip xxx
08. docker-machine start xxx
09. docker-machine env default
10. eval $(docker-machine env xxx)
11. docker exec -it xxxx sh
12. docker ps ....    
13. docker-machine stop xxx

## virtualbox端口镜像
01. docker run -d -p 8080:80 xxx docker:8080对应xxx:80 
02. docker-machine stop xxx
03. VBoxManage modifyvm "boot2docker-vm" --natpf1 "<Rule Name>,<tcp|udp>,<MAC-IP>,<MAC-Port>,<xxx-IP>,<xxx-Port>" 

## vmware
01. https://github.com/docker download
02. docker-machine create --driver vmwarefusion --vmwarefusion-cpu-count 2 --vmwarefusion-disk-size 2048 --vmwarefusion-memory-size 1024 xxx
03. VMwareFusion–>Prefrences–>Network–>Add network aaa
04. docker-machine stop xxx 
05. vim /Library/Preferences/VMware Fusion/aaa/dhcpd.conf host xxx { hardware ethernet xxx-mac; fixed-address xxx-ip; }
06. sudo /Applications/VMware\ Fusion.app/Contents/Library/vmnet-cli --stop
07. sudo /Applications/VMware\ Fusion.app/Contents/Library/vmnet-cli --start
08. docker-machine start xxx
09. docker-machine ssh xxx
10. sudo route -n add xx.xx.0.0/16 xx.xx.?.?
11. docker pull xxx/xxx  

## vmware端口映射
01. docker run -d -p 8080:80 xxx docker:8080对应xxx:80
02. /Library/Preferences/VMware Fusion/vmnet8/nat.conf incomingtcp incomingudp