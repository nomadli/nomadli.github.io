---
layout: post
title:  "Git"
date:   2015-12-14 17:50:00
categories: Other
excerpt: git命令。
---

* content
{:toc}

## svn 命令
- svnadmin create name
- svn co file:///path
- svn rm -m "remove tree or file" http://*
- svn import -m "add tree or file" fatherfload http://* 
- svn copy http://xx http://xx -m "crate tage"
- svn info --username xxx --password xx --no-auth-cache  svn://xxx 显示svn信息

## git svn
- git svn clone -s svn-repository-url 所有目录
- git svn clone -T svn-repository-url trunk目录
- git svn clone -b svn-repository-url branch目录
- git svn clone -rxxx:HEAD --prefix=svn/ http://
- git rebase 同步远程库
- git svn dcommit 提交到svn

## 修改svn服务器地址
1. Edit the svn-remote url URL in .git/config to point to the new domain name
2. Run git svn fetch – This needs to fetch at least one new revision from svn!
3. Change svn-remote url back to the original url
4. Run git svn rebase -l to do a local rebase (with the changes that came in with the last fetch operation)
5. Change svn-remote url back to the new url
6. Run git svn rebase should now work again!

## git 迁移到SVN
1. 创建标准svn库 trunk branches tags
2. git svn init -s svn-url 添加标准svn
3. git svn fetch 更新svn历史到git
4. git show-ref trunk 显示svn分支当前最后提交
5. git log --pretty=oneline master | tail -n 1 显示git第一条commit
6. echo "git 第一条md5 svn 最后一条md5" >> .git/info/grafts 把git第一条提交及以后的提交放到svn最后一条后
7. git svn dcommit

## git分支提交到SVN
1. 创建svn的branch
2. git svn fetch 更新svn
3. git checkout branch 切换到分支
4. git checkout -b temp-branck  创建临时分支
5. git rebase remotes/branch 把本地分支合并到远程分支
6. git svn dcommit
7. git branch -D temp-branck

## 从git分支更新svn分支
1. 修改.git/config [svn-remote "branck"] url = svn/branches fetch = :refs/remotes/branch [branch "local-branch"] remote = . merge = refs/remotes/branch
2. git svn dcommit

## 备份其他仓库
1. git clone --bare url		本地备份远程库
2. git push --mirror url 	本地库备份到远程

## git 转 Fossil
1. cd git-repo
2. git fast-export --all | fossil import --git name.fossil

## Fossil 转 git
1. git init name
2. cd name-repo
3. fossil export --git ../name.fossil | git fast-import

## git
- git init --bare 初始化git基础库
- git clone 第一次获取库
- git pull 远程库同步到本地
- git push 本地库同步到远程
- git gc 垃圾清理和压缩
- git status 当前状态信息
- git branch -a 显示所有branch, 带*号的是当前分支
- git checkout -b new_branch 创建新分支
- git diff 显示修改内容
- git checkout path/filename 回复某文件的修改
- git checkout . && git clean -xdf 放弃本地所有修改
- git add path/filename 添加新文件
- git add .git 添加所有文件
- git reset 将已经add但没有commit的文件移除
- git commit -a -m "message"
- git diff --cached 查看本地库与远程的差异
- git show 查看最近提交的内容
- git log 查看日志
- git rm 删除文件
- git mv 移动文件
- git clean -nfd 清理工作树
- git blame 查看文件中每一行变动的作者
- git cherry-pick SHA 将某分支的某次特定提交合并到当前分支
- git rebase --abort、--skip 两个分支按时间线来合并
- git stash save pop clear --keep-index 临时保存修改
- git init、git remote add -t-f ... git checkout 只克隆某分支
- git --git-dir=/.git format-patch -k -l --stdout \| git am -3 -k 将不相干的仓库应用到当前仓库
- git update-index --assume-unchanged 忽略某文件的修改
- git filter-brach --prune-emtpy --subdirectory-filtermaster 将某个文件夹变成新的仓库
- git symbolic-ref HEAD refs/heads/master 设置默认分支

## 彻底删除文件和历史记录
1. git filter-branch --tree-filter 'rm -f ArtQRCode/ffmpeg' HEAD
	git ls-remote
	git update-ref -d refs/original/refs/heads/master
	rm -rf .git/logs
	git reflog expire --expire=now --all
	git gc --prune=now --aggressive
2. git filter-branch --index-filter 'git rm -r --cached --ignore-unmatch ArtQRCode/ffmpeg' HEAD  
    git push origin master --force  
    rm -rf .git/refs/original/  
    git reflog expire --expire=now --all  
    git gc --aggressive --prune=now 
3. git delete remote
   echo 保留的最早提交的Commit Hash > .git/info/grafts
   git filter-branch -- --all
   rm .git/info/grafts
   git update-ref -d refs/original/refs/heads/master
   git reflog expire --expire=now --all
   git gc --prune=now --aggressive
      
## CVS转git
1. brew install cvsps
2.  export CVSROOT=:pserver:anonymous@cvs.schmorp.de/schmorpforge
3. cvsps login
4. git cvsimport -v -d :pserver:anonymous@cvs.schmorp.de/schmorpforge liev
