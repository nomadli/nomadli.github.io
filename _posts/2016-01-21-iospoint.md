---
layout: post
title:  "ios知识点"
date:   2015-12-04 09:08:00
categories: IOS
excerpt: ios知识点。
---

* content
{:toc}

## UIAppearance
1. 统一更换样式

## NetworkExtension
1. 连接VPN
2. 代理
3. 网络设置密码、权限验证
4. 流量监控
5. NEHotspotHelper

## ATS 
01. ATS (App Transport Security)  
02. NSAppTransportSecurity NSAllowsArbitraryLoads NSExceptionDomains
03. netname NSExceptionAllowsInsecureHTTPLoads true
04. NSAppTransportSecurity NSAllowsArbitraryLoads true
05. NSAppTransportSecurity AppTransportSecurity  allow Arbitary Loads true
06. NSAppTransportSecurity NSAllowsArbitraryLoadsInWebContent true

## 跳转到设置
01. [[UIApplication sharedApplication] openURL:];
02. wifi @"prefs:root=WIFI"
03. gps @"prefs:root=LOCATION_SERVICES"
04. faceTime @"prefs:root=FACETIME"
05. music @"prefs:root=MUSIC"
06. 墙纸 @"prefs:root=Wallpaper"
07. 蓝牙 @"prefs:root=Bluetooth"
08. icloud @"prefs:root=CASTLE"     

## Clang Attributes
01. NS_FORMAT_FUNCTION(F,A) = \_\_attribute\_\_((format(\_\_NSString\_\_,F,A)) 第F参数是格式化字符串,从A开始检查匹配,放函数声明末尾。
02. \_\_attribute\_\_((format(printf,F,A))同上C语言。
03. void \_\_attribute\_\_((noreturn)) FUNC 函数永远不返回。
04. NS_DEPRECATED_IOS=\_\_attribute\_\_((availability(macosx/ios,introduced=4.0,deprecated=7.0,obsoleted=9.0,message=""))) 函数末尾 指定函数开始版本、废弃版本、彻底不能使用版本、警告信息。
05. \_\_attribute\_\_((warn_unused_result)) 函数末尾 检查函数调用是否使用返回值,没有使用警告。
06. \_\_attribute\_\_((constructor(num))) 函数最前面 在main函数之前调用的函数,num[101,)表示优先级,数字小优先级高,100以下系统占用。
07. \_\_attribute\_\_((destructor)) 函数最前面 在进程退出时调用。
08. \_\_attribute\_\_((cleanup(函数指针))) 变量名后 在出变量的作用域后执行函数。技巧定义一个未使用的block变量在block里它的释放函数里做释放其他变量:__strong void(^block)(void) \_\_attribute\_\_((cleanup(blockCleanUp),unused)) = ^{};定义一个block变量在出block作用域后调用blockCleanUp,blockCleanUp调用block.
09. \_\_attribute\_\_((objc_subclassing_restricted)) 在interface前 禁止被继承。
10. \_\_attribute\_\_((objc_requires_super))接口声明后,子类复写这个方法时必须调用父方法。
11. \_\_attribute\_\_((objc_boxable)) struct名后 使struct可以使用{}初始化。
12. \_\_attribute\_\_((enable_if(条件,提示))) 函数后 判断参数等条件,只能C函数使用。
13. \_\_attribute\_\_((overloadable)) 函数前面 C编译器重置函数。
14. \_\_attribute\_\_((objc_runtime_name(name))) @interface 或 @protocol前面,指定运行时class名称。
15. \_\_attribute\_\_((constructor)) //在main函数之前调用
16. \_\_attribute\_\_((destructor)) //在main函数之后调用
17. \_\_attribute\_\_((aligned(8))) //字节对其
18. \_\_attribute\_\_((\_\_packed\_\_)) //紧密排列
19. \_\_attribute\_\_((\_\_transparent_union\_\_)) //可以实现动态类型参数,即将传入参数转为联合体

## \#pragma
01. \#pragma mark -  代码分类
02. \#pragma clang diagnostic push clang参数压栈
03. \#pragma clang diagnostic pop clang参数出栈
04. \#pragma clang diagnostic warning "-W*" clang 取消某警告 文章末尾列表
05. \#pragma clang diagnostic ignored "-W*"
06. \#pragma clang assume_nonnull begin
06. \#pragma clang assume_nonnull end 

## lldb
1. watchpoint set expression (int*)&intvalue 写监控
2. watchpoint set v -w read intvalue 读监控
3. watchpoint set v -w read_write intvalue 读写
4. watchpoint set v -w write intvalue 写
5. pro hand -p true -s false SIGABRT/...  允许信号xcode不中断指定信号

## LLVM
01. 源码->AST->LLVM IR->LLVM Bytecode->ASM->Native

## clan
01. clang -ccc-print-phases *.m 显示编译步骤  
02. clang -E *.c | less 只执行到预处理  
03. clang -Xclang -dump-tokens *.m 语法解析标记
04. clang -Xclang -ast-dump -fsyntax-only *.m 语法树 
05. clang -O3 -emit-llvm \*.c -c -o *.bc 二进制码 
06. llvm-dis < hello.bc | less 查看二进制码
07. clang -rewrite-objc *.m 转object 到 c 代码 

## Xcode 参数
01. ArgumentsPassedonLaunchd AppleLanguages 
    NSDoubleLocalizedStrings
    NSShowNonLocalizedStrings
    UIViewShowAlignmentRect
    -com.apple.CoreData.SQLDebug
    -com.apple.CoreData.SyntaxColoredLogging
    -com.apple.CoreData.MigrationDebug 
02. Environment Variables
    NSZombieEnabled
    NSDeallocateZombies
    MallocScribble
    MallocGuardEdges
    MallocStackLogging
    MallocStackLoggingNoCompact
    NSUnbufferedIO
    
## symbole
01. setting Generate Debug Symbols
02. setting Debug Information Level
03. setting Strip Linked Product Deployment Postprocessing必须打开
04. setting Strip Style 影响03的范围
05. setting Strip Debug Symbols During Copy 影响扩展的符号 
06. setting Debug Information Format debug符号保存方式 被Generate Debug Symbols影响
07. find /Applications/Xcode.app -name symbolicatecrash -type f
08. symbolicatecrash \*.crash \*.dSYM > log   

##  签名
01. security find-identity -v -p codesigning  列出所有可用证书
02. codesign -f -s 'iPhone Developer: name (number)' path.app 签名
03. codesign -vv -d path.app 查看签名信息
04. codesign --verify path.app 校验签名 如果正确无任何输出
05. codesign -d --entitlements - path.app 查看授权
06. security cms -D -i name.mobileprovision 查看配置文件信息
07. 服务器推送签名导出
    证书公私钥导出p12(公钥 cer、私钥 key)
    openssl x509 -in aps.cer -inform der -out public.pem
    openssl pkcs12 -nocerts -out private.pem -in private.p12
    openssl rsa -in private.pem -out private-noenc.pem 删除密码
    cat public.pem private.pem > apns-dev.pem 合并密钥
    
## clang 警告字段
- -WCFString-literal
- -WNSObject-attribute
- -Wabstract-vbase-init
- -Waddress-of-array-temporary
- -Warc-maybe-repeated-use-of-weak
- -Warc-non-pod-memaccess
- -Warc-performSelector-leaks
- -Warc-repeated-use-of-weak
- -Warc-retain-cycles
- -Warc-unsafe-retained-assign
- -Warc-unsafe-retained-assign
- -Warc-unsafe-retained-assign
- -Warray-bounds
- -Warray-bounds-pointer-arithmetic
- -Wassign-enum
- -Watomic-property-with-user-defined-accessor
- -Wattributes
- -Wauto-var-id
- -Wavailability
- -Wbad-function-cast
- -Wbitfield-constant-conversion
- -Wbitwise-op-parentheses
- -Wbool-conversion
- -Wbridge-cast
- -Wbuiltin-requires-header
- -Wc++-compat
- -Wc++11-narrowing
- -Wc++98-c++11-compat
- -Wc++98-compat
- -Wc++98-compat-pedantic
- -Wcast-align
- -Wcast-of-sel-type
- -Wchar-subscripts
- -Wconditional-uninitialized
- -Wconstant-logical-operand
- -Wconstexpr-not-const
- -Wconsumed
- -Wconversion
- -Wcovered-switch-default
- -Wcustom-atomic-properties
- -Wdangling-field
- -Wdangling-initializer-list
- -Wdelete-incomplete
- -Wdelete-non-virtual-dtor
- -Wdeprecated
- -Wdeprecated-increment-bool
- -Wdeprecated-objc-isa-usage
- -Wdeprecated-objc-pointer-introspection
- -Wdeprecated-objc-pointer-introspection-performSelector
- -Wdeprecated-writable-strings
- -Wdirect-ivar-access
- -Wdistributed-object-modifiers
- -Wdivision-by-zero
- -Wdocumentation
- -Wduplicate-enum
- -Wduplicate-method-match
- -Wdynamic-class-memaccess
- -Wempty-body
- -Wenum-compare
- -Wenum-conversion
- -Wexit-time-destructors
- -Wexplicit-ownership-type
- -Wextern-c-compat
- -Wextern-initializer
- -Wfloat-equal
- -Wformat
- -Wformat-extra-args
- -Wformat-invalid-specifier
- -Wformat-nonliteral
- -Wformat-security
- -Wformat-zero-length
- -Wgcc-compat
- -Wglobal-constructors
- -Wgnu-conditional-omitted-operand
- -Wheader-hygiene
- -Widiomatic-parentheses
- -Wignored-attributes
- -Wignored-qualifiers
- -Wimplicit-atomic-properties
- -Wimplicit-fallthrough
- -Wimplicit-function-declaration
- -Wimplicit-retain-self
- -Wincompatible-library-redeclaration 
- -Wincomplete-implementation
- -Winherited-variadic-ctor
- -Winitializer-overrides
- -Wint-to-pointer-cast
- -Wint-to-void-pointer-cast
- -Winvalid-iboutlet
- -Winvalid-noreturn
- -Wlarge-by-value-copy
- -Wliteral-conversion
- -Wliteral-range
- -Wlogical-not-parentheses
- -Wloop-analysis
- -Wmethod-signatures
- -Wmicrosoft
- -Wmismatched-method-attributes
- -Wmismatched-parameter-types
- -Wmismatched-return-types
- -Wmissing-braces
- -Wmissing-declarations
- -Wmissing-field-initializers
- -Wmissing-method-return-type
- -Wmissing-noreturn
- -Wmissing-prototypes
- -Wmissing-variable-declarations
- -Wmultiple-move-vbase
- -Wnested-anon-types
- -Wno-typedef-redefinition
- -Wnon-literal-null-conversion
- -Wnon-pod-varargs
- -Wnon-virtual-dtor
- -Wnonnull
- -Wnull-arithmetic
- -Wnull-dereference
- -Wobjc-autosynthesis-property-ivar-name-match
- -Wobjc-forward-class-redefinition
- -Wobjc-interface-ivars
- -Wobjc-literal-compare
- -Wobjc-literal-missing-atsign
- -Wobjc-method-access
- -Wobjc-missing-property-synthesis
- -Wobjc-missing-super-calls
- -Wobjc-noncopy-retain-block-property
- -Wobjc-nonunified-exceptions
- -Wobjc-property-implementation
- -Wobjc-property-implicit-mismatch
- -Wobjc-property-matches-cocoa-ownership-rule
- -Wobjc-property-no-attribute
- -Wobjc-property-synthesis
- -Wobjc-protocol-method-implementation
- -Wobjc-protocol-property-synthesis
- -Wobjc-redundant-literal-use
- -Wobjc-root-class
- -Wobjc-string-compare
- -Wobjc-string-concatenation
- -Wover-aligned
- -Woverloaded-shift-op-parentheses
- -Woverloaded-virtual
- -Woverriding-method-mismatch
- -Wpacked
- -Wparentheses
- -Wparentheses-equality
- -Wpointer-arith
- -Wpredefined-identifier-outside-function
- -Wprivate-extern
- -Wprotocol
- -Wprotocol-property-synthesis-ambiguity
- -Wreadonly-iboutlet-property
- -Wreadonly-setter-attrs
- -Wreceiver-expr
- -Wreceiver-forward-class
- -Wreceiver-is-weak
- -Wreinterpret-base-class
- -Wreorder
- -Wrequires-super-attribute
- -Wreturn-stack-address
- -Wreturn-type
- -Wreturn-type-c-linkage
- -Wsection
- -Wselector
- -Wselector-type-mismatch
- -Wself-assign
- -Wself-assign-field
- -Wsentinel
- -Wshadow
- -Wshadow-ivar
- -Wshift-count-negative
- -Wshift-count-overflow
- -Wshift-op-parentheses
- -Wshift-overflow 
- -Wshift-sign-overflow
- -Wshorten-64-to-32
- -Wsign-compare
- -Wsign-conversion
- -Wsizeof-array-argument
- -Wsizeof-array-decay
- -Wsizeof-pointer-memaccess
- -Wsometimes-uninitialized
- -Wstatic-local-in-inline
- -Wstatic-self-init
- -Wstrict-selector-match
- -Wstring-compare
- -Wstring-conversion
- -Wstring-plus-char
- -Wstring-plus-int
- -Wstrlcpy-strlcat-size
- -Wstrncat-size
- -Wsuper-class-method-mismatch
- -Wswitch
- -Wswitch-enum
- -Wtautological-compare
- -Wtautological-constant-out-of-range-compare
- -Wthread-safety-analysis
- -Wthread-safety-attributes
- -Wthread-safety-beta
- -Wthread-safety-precise
- -Wtype-safety
- -Wundeclared-selector
- -Wundefined-inline
- -Wundefined-internal
- -Wundefined-reinterpret-cast
- -Wuninitialized
- -Wunneeded-internal-declaration
- -Wunneeded-member-function
- -Wunreachable-code
- -Wunsequenced
- -Wunsupported-friend
- -Wunsupported-visibility
- -Wunused-comparison
- -Wunused-const-variable
- -Wunused-exception-parameter
- -Wunused-function
- -Wunused-label
- -Wunused-member-function
- -Wunused-parameter
- -Wunused-private-field
- -Wunused-property-ivar
- -Wunused-result
- -Wunused-value
- -Wunused-variable
- -Wunused-volatile-lvalue
- -Wused-but-marked-unused
- -Wuser-defined-literals
- -Wvarargs
- -Wvector-conversion
- -Wvexing-parse
- -Wvisibility
- -Wvla
- -Wvla-extension
- -Wweak-template-vtables
- -Wweak-vtables
- -W#pragma-messages
- -W#warnings
- -Wambiguous-macro
- -Wauto-import
- -Wbackslash-newline-escape
- -Wc++11-compat
- -Wc++98-c++11-compat
- -Wc++98-c++11-compat-pedantic
- -Wc++98-compat
- -Wc++98-compat-pedantic
- -Wc99-compat
- -Wcomment
- -Wdisabled-macro-expansion
- -Wheader-guard
- -Wignored-attributes
- -Wincomplete-module
- -Wincomplete-umbrella
- -Winvalid-token-paste
- -Wmalformed-warning-check
- -Wnewline-eof
- -Wnull-character
- -Wtrigraphs
- -Wundef
- -Wunicode
- -Wunknown-pragmas
- -Wunused-macros
- -Warc-bridge-casts-disallowed-in-nonarc
- -Wattributes
- -Wavailability
- -Wc++11-compat
- -Wc++98-c++11-compat
- -Wc++98-compat
- -Wc++98-compat-pedantic
- -Wdangling-else
- -Wdeprecated
- -Wdeprecated-declarations
- -Wdeprecated-register
- -Wduplicate-decl-specifier
- -Wextra-semi
- -Wextra-tokens
- -Wgcc-compat
- -Wignored-attributes
- -Wmicrosoft-exists
- -Wmissing-selector-name
- -Wsemicolon-before-method-body
- -Wsource-uses-openmp
- -Wstatic-inline-explicit-instantiation