---
layout: post
title:  "ios知识点"
date:   2015-12-04 09:08:00
categories: IOS
excerpt: ios知识点。
---

* content
{:toc}

## 客服
1. https://developer.apple.com/support/D-U-N-S/cn/

## UIAppearance
1. 统一更换样式

## NetworkExtension
1. 连接VPN
2. 代理
3. 网络设置密码、权限验证
4. 流量监控
5. NEHotspotHelper

## ATS 
01. ATS (App Transport Security)  
02. NSAppTransportSecurity NSAllowsArbitraryLoads NSExceptionDomains
03. netname NSExceptionAllowsInsecureHTTPLoads true
04. NSAppTransportSecurity NSAllowsArbitraryLoads true
05. NSAppTransportSecurity AppTransportSecurity  allow Arbitary Loads true
06. NSAppTransportSecurity NSAllowsArbitraryLoadsInWebContent true

## 跳转到设置
01. [[UIApplication sharedApplication] openURL:];
02. wifi @"prefs:root=WIFI"
03. gps @"prefs:root=LOCATION_SERVICES"
04. faceTime @"prefs:root=FACETIME"
05. music @"prefs:root=MUSIC"
06. 墙纸 @"prefs:root=Wallpaper"
07. 蓝牙 @"prefs:root=Bluetooth"
08. icloud @"prefs:root=CASTLE"     

## Clang Attributes
01. NS_FORMAT_FUNCTION(F,A) = \_\_attribute\_\_((format(\_\_NSString\_\_,F,A)) 第F参数是格式化字符串,从A开始检查匹配,放函数声明末尾。
02. \_\_attribute\_\_((format(printf,F,A))同上C语言。
03. void \_\_attribute\_\_((noreturn)) FUNC 函数永远不返回。
04. NS_DEPRECATED_IOS=\_\_attribute\_\_((availability(macosx/ios,introduced=4.0,deprecated=7.0,obsoleted=9.0,message=""))) 函数末尾 指定函数开始版本、废弃版本、彻底不能使用版本、警告信息。
05. \_\_attribute\_\_((warn_unused_result)) 函数末尾 检查函数调用是否使用返回值,没有使用警告。
06. \_\_attribute\_\_((constructor(num))) 函数最前面 在main函数之前调用的函数,num[101,)表示优先级,数字小优先级高,100以下系统占用。
07. \_\_attribute\_\_((destructor)) 函数最前面 在进程退出时调用。
08. \_\_attribute\_\_((cleanup(函数指针))) 变量名后 在出变量的作用域后执行函数。技巧定义一个未使用的block变量在block里它的释放函数里做释放其他变量:__strong void(^block)(void) \_\_attribute\_\_((cleanup(blockCleanUp),unused)) = ^{};定义一个block变量在出block作用域后调用blockCleanUp,blockCleanUp调用block.
09. \_\_attribute\_\_((objc_subclassing_restricted)) 在interface前 禁止被继承。
10. \_\_attribute\_\_((objc_requires_super))接口声明后,子类复写这个方法时必须调用父方法。
11. \_\_attribute\_\_((objc_boxable)) struct名后 使struct可以使用{}初始化。
12. \_\_attribute\_\_((enable_if(条件,提示))) 函数后 判断参数等条件,只能C函数使用。
13. \_\_attribute\_\_((overloadable)) 函数前面 C编译器重置函数。
14. \_\_attribute\_\_((objc_runtime_name(name))) @interface 或 @protocol前面,指定运行时class名称。
15. \_\_attribute\_\_((constructor)) //在main函数之前调用
16. \_\_attribute\_\_((destructor)) //在main函数之后调用
17. \_\_attribute\_\_((aligned(8))) //字节对其
18. \_\_attribute\_\_((\_\_packed\_\_)) //紧密排列
19. \_\_attribute\_\_((\_\_transparent_union\_\_)) //可以实现动态类型参数,即将传入参数转为联合体

## \#pragma
01. \#pragma mark -  代码分类
02. \#pragma clang diagnostic push clang参数压栈
03. \#pragma clang diagnostic pop clang参数出栈
04. \#pragma clang diagnostic warning "-W*" 添加警告
05. \#pragma clang diagnostic ignored "-W*" 取消某警告 文章末尾列表
06. \#pragma clang assume_nonnull begin
06. \#pragma clang assume_nonnull end 

## lldb
1. watchpoint set expression (int*)&intvalue 写监控
2. watchpoint set v -w read intvalue 读监控
3. watchpoint set v -w read_write intvalue 读写
4. watchpoint set v -w write intvalue 写
5. watchpoint delete num
6. pro hand -p true -s false SIGABRT/...  允许信号xcode不中断指定信号

## LLVM
01. 源码->AST->LLVM IR->LLVM Bytecode->ASM->Native
02. x 按十六进制格式显示变量
03. d 按十进制格式显示变量
04. u 按十进制格式显示无符号整型
05. o 按八进制格式显示变量
06. t 按二进制格式显示变量
07. a 按十六进制格式显示变量
08. i 指令地址格式
09. c 按字符格式显示变量
10. f 按浮点数格式显示变量
11. b表示单字节
12. h表示双字节
13. w表示四字节
14. g表示八字节

## clan
01. clang -ccc-print-phases *.m 显示编译步骤  
02. clang -E *.c | less 只执行到预处理  
03. clang -Xclang -dump-tokens *.m 语法解析标记
04. clang -Xclang -ast-dump -fsyntax-only *.m 语法树 
05. clang -O3 -emit-llvm \*.c -c -o *.bc 二进制码 
06. llvm-dis < hello.bc | less 查看二进制码
07. clang -rewrite-objc *.m 转object 到 c 代码 

## bluetooth
01. CBCentralManager
02. CBPeripheral
03. CBCharacteristic
04. CBCentralManagerDelegate
05. CBPeripheralDelegate
06. CBPeripheralManager
07. CBMutableCharacteristic
08. CBPeripheralManagerDelegate

## Xcode 参数
01. ArgumentsPassedonLaunchd AppleLanguages 
    NSDoubleLocalizedStrings
    NSShowNonLocalizedStrings
    UIViewShowAlignmentRect
    -com.apple.CoreData.SQLDebug
    -com.apple.CoreData.SyntaxColoredLogging
    -com.apple.CoreData.MigrationDebug 
02. Environment Variables
    NSZombieEnabled
    NSDeallocateZombies
    MallocScribble
    MallocGuardEdges
    MallocStackLogging
    MallocStackLoggingNoCompact
    NSUnbufferedIO
    DYLD_PRINT_STATISTICSvalue 打印启动前耗时
03. /Library/LaunchAgents/***.plist
	 KeepAlive false
	 Lable xxx
	 ProgramArguments path/xx.sh
	 RunAtLoad true
	 UserName root
	 xx.sh :
	 RAMDISK_PATH="/Volumes/build-disk"
	 RAMDISK_SIZE=$((2048 * 512))
	 readonly RAMDISK_PATH
	 if [ ! -d $"RAMDISK_PATH" ]; then
	 	diskutil erasevolume HFS+ "${RAMDISK_PATH##*/}" (hdiutil attach -nomount ram://$RAMDISK_SIZE)
	else
		diskutil unmount "${RAMDISK_PATH##*/}"
	fi
    
## symbole
01. setting Generate Debug Symbols
02. setting Debug Information Level
03. setting Strip Linked Product Deployment Postprocessing必须打开
04. setting Strip Style 影响03的范围
05. setting Strip Debug Symbols During Copy 影响扩展的符号 
06. setting Debug Information Format debug符号保存方式 被Generate Debug Symbols影响
07. find /Applications/Xcode.app -name symbolicatecrash -type f
08. symbolicatecrash \*.crash \*.dSYM > log   

##  签名
01. security find-identity -v -p codesigning  列出所有可用证书
02. codesign -f -s 'iPhone Developer: name (number)' path.app 签名
03. codesign -vv -d path.app 查看签名信息
04. codesign --verify path.app 校验签名 如果正确无任何输出
05. codesign -d --entitlements - path.app 查看授权
06. security cms -D -i name.mobileprovision 查看配置文件信息
07. 服务器推送签名导出
    证书公私钥导出p12(公钥 cer、私钥 key)
    openssl x509 -in aps.cer -inform der -out public.pem
    openssl pkcs12 -nocerts -out private.pem -in private.p12
    openssl rsa -in private.pem -out private-noenc.pem 删除密码
    cat public.pem private.pem > apns-dev.pem 合并密钥
    
## Date
1. x	数字时区 +0800、+08:00 (x,xx,xxx,xxxx,xxxxx)
2. a	上下午 AM/PM
3. A   今天的第多少毫秒
4. c	本周第几天(c,cc,ccc,cccc)
5. d   本月第几天
6. e   本周第几天 (e,EEE,EEEE)
7. F   本月第几周
8. g   julian day (since 1/1/4713 BC)
9. G   era designator (G=GGG,GGGG)
10. h  hour (1-12, zero padded)
11. H  hour (0-23, zero padded)
12. L  month of year (L,LL,LLL,LLLL)
13. m  minute of hour (0-59, zero padded)
14. M  month of year (M,MM,MMM,MMMM)
15. Q  quarter of year (Q,QQ,QQQ,QQQQ) 季节
16. s  seconds of minute (0-59, zero padded)
17. S  fraction of second 毫秒
18. u  zero padded year 公元年
19. v  general timezone (v=vvv,vvvv)
20. w  week of year (0-53, zero padded)
21. y  year (y,yy,yyyy)
22. z  specific timezone (z=zzz,zzzz)
23. Z  timezone offset +0000

## Draw
01. shouldRasterize后,CALayer会被光栅化为bitmap并做为贴图进入GPU内存，动态变化的Layer不能用，否则。。。
02. CATiledLayer将图层再次分割成独立更新的小块在多个线程中为每个小块同时调用-drawLayer:inContext:方法。
03. drawsAsynchronously属性对传入-drawLayer:inContext:延缓绘制命令的执行，命令加入队列，在后台线程真正绘制。 
